<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Nextdoor Deep Search - AI Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>AI Configuration</h1>
      <p class="subtitle">Configure LLM provider for analysis</p>
    </header>

    <section class="config-section">
      <div class="form-group">
        <label for="provider-select">LLM Provider</label>
        <select id="provider-select">
          <option value="">-- Select Provider --</option>
          <option value="openai">OpenAI</option>
          <option value="claude">Claude (Anthropic)</option>
          <option value="ollama">Ollama (Local)</option>
        </select>
      </div>

      <!-- OpenAI Configuration -->
      <div id="openai-config" class="provider-config" style="display: none;">
        <h2>OpenAI Configuration</h2>
        <div class="form-group">
          <label for="openai-api-key">API Key</label>
          <input type="password" id="openai-api-key" placeholder="sk-...">
          <button type="button" id="openai-toggle-key" class="btn-secondary btn-small">Show</button>
        </div>
        <div class="form-group">
          <label for="openai-model">Model</label>
          <select id="openai-model">
            <option value="gpt-5.2">gpt-5.2 (Recommended)</option>
            <option value="gpt-5.1">gpt-5.1</option>
            <option value="gpt-4.1">gpt-4.1</option>
            <option value="gpt-4.1-nano">gpt-4.1-nano (Budget)</option>
            <option value="gpt-4o">gpt-4o</option>
            <option value="gpt-4o-mini">gpt-4o-mini</option>
          </select>
        </div>
      </div>

      <!-- Claude Configuration -->
      <div id="claude-config" class="provider-config" style="display: none;">
        <h2>Claude Configuration</h2>
        <div class="form-group">
          <label for="claude-api-key">API Key</label>
          <input type="password" id="claude-api-key" placeholder="sk-ant-...">
          <button type="button" id="claude-toggle-key" class="btn-secondary btn-small">Show</button>
        </div>
        <div class="form-group">
          <label for="claude-model">Model</label>
          <select id="claude-model">
            <option value="claude-sonnet-4-5-20250929">claude-sonnet-4.5 (Recommended)</option>
            <option value="claude-haiku-4-5-20251001">claude-haiku-4.5 (Fast)</option>
            <option value="claude-opus-4-5-20251101">claude-opus-4.5 (Premium)</option>
            <option value="claude-sonnet-4-20250514">claude-sonnet-4</option>
            <option value="claude-3-5-haiku-20241022">claude-3.5-haiku (Budget)</option>
          </select>
        </div>
      </div>

      <!-- Ollama Configuration -->
      <div id="ollama-config" class="provider-config" style="display: none;">
        <h2>Ollama Configuration</h2>
        <div class="form-group">
          <label for="ollama-url">Server URL</label>
          <input type="text" id="ollama-url" placeholder="http://localhost:11434" value="http://localhost:11434">
        </div>
        <div class="form-group">
          <label for="ollama-model">Model Name</label>
          <input type="text" id="ollama-model" placeholder="qwen2.5:7b" value="qwen2.5:7b">
        </div>
      </div>

      <!-- Custom Analysis Prompt -->
      <div class="prompt-config">
        <h2>Analysis Prompt</h2>
        <p class="prompt-description">Customize the instructions sent to the AI when analyzing search results. This controls how the AI interprets and presents the data.</p>
        <div class="form-group">
          <label for="custom-prompt">Custom Prompt</label>
          <textarea id="custom-prompt" rows="10" placeholder="Enter custom analysis instructions..."></textarea>
          <div class="prompt-actions">
            <button type="button" id="reset-prompt-btn" class="btn-secondary btn-small">Reset to Default</button>
          </div>
        </div>
      </div>

      <!-- Validation Status -->
      <div id="validation-status" class="validation-status" style="display: none;">
        <div class="status-indicator">
          <div id="validation-spinner" class="spinner" style="display: none;"></div>
          <div id="validation-success" class="success-icon" style="display: none;">✓</div>
          <div id="validation-error" class="error-icon" style="display: none;">✗</div>
        </div>
        <div id="validation-message" class="validation-message"></div>
      </div>

      <!-- Action Buttons -->
      <div class="button-group">
        <button id="validate-btn" class="btn btn-secondary" disabled>
          Validate Configuration
        </button>
        <button id="save-btn" class="btn btn-primary" disabled>
          Save Configuration
        </button>
      </div>

      <!-- Current Status -->
      <div id="current-status" class="current-status" style="display: none;">
        <h3>Current Configuration</h3>
        <p id="status-text">No AI provider configured</p>
      </div>
    </section>
  </div>

  <script src="options.js"></script>
</body>
</html>
