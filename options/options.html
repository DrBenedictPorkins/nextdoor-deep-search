<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Nextdoor Deep Search - AI Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>AI Configuration</h1>
      <p class="subtitle">Configure LLM provider for analysis</p>
    </header>

    <section class="config-section">
      <!-- Claude Configuration -->
      <div id="claude-config" class="provider-config">
        <h2>Claude Configuration</h2>
        <div class="form-group">
          <label for="claude-api-key">API Key</label>
          <input type="password" id="claude-api-key" placeholder="sk-ant-...">
          <button type="button" id="claude-toggle-key" class="btn-secondary btn-small">Show</button>
        </div>
        <div class="form-group">
          <label for="claude-model">Model</label>
          <select id="claude-model">
            <option value="claude-haiku-4-5-20251001">Claude Haiku 4.5 (Recommended)</option>
            <option value="claude-sonnet-4-6">Claude Sonnet 4.6</option>
            <option value="claude-opus-4-6">Claude Opus 4.6 (Premium)</option>
          </select>
        </div>
      </div>

      <!-- Response Settings -->
      <div class="prompt-config">
        <h2>Response Settings</h2>
        <div class="form-group">
          <label for="max-tokens">Max Output Tokens</label>
          <input type="number" id="max-tokens" min="256" max="8192" step="256" value="2048">
          <p class="field-hint">Controls response length. Lower = shorter/faster, higher = more detailed. Default: 2048</p>
        </div>

        <h3>Analysis Prompt</h3>
        <p class="prompt-description">Customize the instructions sent to the AI when analyzing search results.</p>
        <div class="form-group">
          <label for="custom-prompt">Custom Prompt</label>
          <textarea id="custom-prompt" rows="10" placeholder="Enter custom analysis instructions..."></textarea>
          <div class="prompt-actions">
            <button type="button" id="reset-prompt-btn" class="btn-secondary btn-small">Reset to Default</button>
          </div>
        </div>
      </div>

      <!-- Validation Status -->
      <div id="validation-status" class="validation-status" style="display: none;">
        <div class="status-indicator">
          <div id="validation-spinner" class="spinner" style="display: none;"></div>
          <div id="validation-success" class="success-icon" style="display: none;">✓</div>
          <div id="validation-error" class="error-icon" style="display: none;">✗</div>
        </div>
        <div id="validation-message" class="validation-message"></div>
      </div>

      <!-- Action Buttons -->
      <div class="button-group">
        <button id="validate-btn" class="btn btn-secondary" disabled>
          Validate Configuration
        </button>
        <button id="save-btn" class="btn btn-primary" disabled>
          Save Configuration
        </button>
      </div>

      <!-- Current Status -->
      <div id="current-status" class="current-status" style="display: none;">
        <h3>Current Configuration</h3>
        <p id="status-text">No AI provider configured</p>
      </div>
    </section>
  </div>

  <script src="options.js"></script>
</body>
</html>
